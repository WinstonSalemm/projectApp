Техническое Задание по разработке проекта Приложения «Система управления ключевыми процессами» компании PP.
Концепт
I.	Склад. Система складского учета. Группы и наименования товаров. Автоматизация складских операций

II.	Продажи. 
- Систематизация работы менеджеров с клиентами (через интерфейс приложения) 
- Фиксация отгрузочных операций согласно функционалу приложения. Цель – избежать дефицита и искажения данных по отгрузкам.
- Распределение бонусов менеджеров 
 
III.	Клиентская база. 
-Формирование базы. 
- Разделение базы согласно Типам продаж.
- Аналитика посещаемости.  
- Аналитика объема закупов каждого из клиентов.
- Присвоение клиенту статуса (розничный, опт, крупный опт).
- Отслеживание обязательств клиента
- Закрепление за менеджером при присвоении бонуса (если подтверждается).     
   
IV.	Коммерческий учет и аналитика 
- внедрение системы цен для каждого типа продаж согласно ПРАЙСу (разработать с учетом ценообразования согласно статусу сделки - % скидок)
- анализ продаж по номенклатурам 
- динамика роста/спада
- прогноз спроса 
- прогноз оборачиваемости товаров
- определение ведущий-отстающий
- формирование акций на базе данных остатков склада и сроков оборачиваемости товаров, роста/спада спроса на рынке
- формирование закупа

АНАЛИТИКА
V.	Финансовая аналитика
- ценообразование с учетом внесения полной информации по себестоимости, налоговому обременению по официальным продажам
- управление шкалой скидок с учетом рыночных цен и нашей торг. Наценки
- распределение продаж на легализованные и не легализованные
- расчет сумм высвобожденного нала по нелегализованным продажам (остальное к инкассации!!!!!) 
- отслеживание адекватности скидок
- анализ окупаемости групп товаров
- бронирование ДС для формирования подушки безопасности в кэше
  





Функционал:

VI.	Автоматизация учета склада
склад: 
- склад состоит из двух баз:
* первичная – НД-40, когда товар физически находится на складе компании, но не вышел в свободное обращение, то есть нет официального прихода. В этом случае разрешена реализация товара только за НАЛ БЕЗ ЧЕКА 
*  вторичная (основная) – ИМ-40, когда товар вышел в режим свободного обращения и оприходован на склад документально. В этом случае разрешены ВСЕ виды продаж

- ввод единого нейминга товаров в соответствии с ГТД по всем системам учета
присвоение артикула на партию товара при оприходовании, самим артикулом признается номер ГТД (он един для НД-40 и ИМ-40)  

- автоматическое удаление наименования позиции товара вместе с его артикулом из базы склада при обнулении его остатков на складе

- определение товаров по группам (вне зависимости от расхождений по наименованиям)  

- оперативная обработка базы данных по остаткам в разрезе номенклатуры при 
совершении складских и торговых операций

- фиксация остатков при завершении торгового дня (автоматизированный учет)
- бронирование товаров по обоим базам и всем типам продаж 
- возврат товаров
- РАЗДЕЛЕНИЕ товаров на две категории - оприходованные по ИМ-40 (все типы продаж) и НД-40 (продажа - только кэш без ККМ) влияет на форму продаж, а также на фактические показатели остатков товара на складе 

- назначение ответственного лица за ведение учета склада физически

- фиксация сроков проведения инвентаризации 


VII.	Система учета продаж в количественном выражении по типам продаж (каждому типу присвоить код)
Понятие «тип продаж» - вид взаиморасчета с клиентом в зависимости от формы оплаты:
Описание типа
1.	Перечисление/безналичный расчет – продажи по договорам с поступлением ДС на р/счет компании
Клиент идентифицируется по ИНН и наименованию компании, на каждый заключенный договор автоматически открывается карточка сделки в которой фиксируется спецификация, статус и сумма оплаты и все отгрузки. Автоматически производится бронирование позиций на складе ИМ-40 либо же обозначается дефицит (то есть возможно есть остаток на НД-40 и мы ждем его выхода в свободное обращение (ИМ-40)). В случаях, когда указанный в спецификации товар находится «в пути» в карточке сделки высвечивается статус ПРЕДЗАКАЗ.   
Требования: 
- внос спецификации договора в приложение с момента выставления договора
- оформление брони товара на складе сроком на 3 дня 
- отгрузка (частичная или полная) после оплаты клиентом за товар 
- фиксация брони по предзаказу для контроля поставок и их сроков
……. (внести дополнения)

2.	 Операции по ККМ (кассовый аппарат – выдача чека)
- Клиент рассчитывается ДС или же посредством пластиковых карт на момент приобретения им товара. 

3.	Продажи за НАЛ БЕЗ ЧЕКА или Clic
- Клиент рассчитывается наличными или же осуществляет перевод на карту Валере, после чего ему отгружают товар

4.	Отгрузка В ДОЛГ
- Клиента фиксируют в приложении по типу продаж «В ДОЛГ», вносят его личные и контактные данные, открывают карточку сделки (новая на каждую отгрузку). Затем фиксируют данные по отгружаемому товару в карточке, количество и стоимость. Указывают срок по оплате (дата до которой клиент должен вернуть долг. Если не вернул, проводится перерасчет суммы долга так как стоимость товара может изменяться ввиду истечения долгого промежутка времени). Отгружают товар без оплаты, выписав клиенту квитанцию

5.	ПРЕДОПЛАТА 

При систематических покупках, совершаемых одним и тем же клиентом менеджер вносит в систему его данные (имя, номер телефона) для дальнейшего анализа объема закупов этого клиента и возможности применения к нему шкалы скидок.  

VIII.	Фиксация продаж в приложении посредством внесения данных менеджерами или админом по блокам продаж (кол-ное выр.)
IX.	Бронирование товаров на складе 

===============================================================================
АНАЛИЗ ГОТОВНОСТИ ПРОЕКТА (от учредителя бизнеса)
===============================================================================
Дата анализа: 18.01.2025

КРИТЕРИИ 100% ПРОЗРАЧНОСТИ БИЗНЕСА:
1. ✅ Видеть ВСЕ продажи (белые, серые, черные) в режиме реального времени
2. ✅ Контролировать складские остатки (НД-40 и ИМ-40)
3. ⚠️ Знать реальную прибыль с учетом ВСЕХ расходов
4. ✅ Контролировать менеджеров удаленно
5. ⚠️ Управлять кассами и финансовыми потоками
6. ⚠️ Видеть дашборд с ключевыми метриками в реальном времени
7. ✅ Получать уведомления о критичных событиях

===============================================================================
МАТРИЦА ГОТОВНОСТИ ПО ТЗ
===============================================================================

I. СКЛАД И СКЛАДСКОЙ УЧЕТ
Status: ✅ DONE (95%)
- [✅] Две базы склада: НД-40 и ИМ-40
- [✅] Партионный учет (FIFO) с артикулами
- [✅] Автоматическое списание при продаже
- [✅] Группировка товаров по номенклатуре
- [✅] Фиксация остатков
- [✅] Бронирование товаров
- [✅] Возврат товаров
- [⚠️] Инвентаризация (нужно доделать функционал учета расхождений)
- [✅] Назначение ответственных

GAP: 
- Автоматические алерты о критических остатках
- Полноценный модуль инвентаризации с учетом недостач/излишков

Рекомендации:
- Добавить push-уведомления владельцу о критических остатках
- Реализовать планирование инвентаризаций

---

II. ПРОДАЖИ
Status: ✅ DONE (90%)
- [✅] Систематизация работы менеджеров
- [✅] Фиксация всех отгрузок
- [✅] Избежание дефицита через бронирование
- [✅] Распределение бонусов менеджеров (1% от своих клиентов)

GAP:
- Более детальный учет типов продаж (черные/серые/белые)
- Фиксация реальной цены vs официальной

Рекомендации:
- Добавить поле "тип операции" (white/grey/black) для внутреннего учета
- Два поля цены: официальная и фактическая

---

III. КЛИЕНТСКАЯ БАЗА
Status: ✅ DONE (100%)
- [✅] Формирование базы клиентов
- [✅] Разделение по типам продаж
- [✅] Аналитика объема закупок
- [✅] Автоматическое присвоение статусов (розница/опт/крупный опт)
- [✅] Отслеживание обязательств (долгов)
- [✅] Закрепление за менеджерами

GAP: НЕТ

Рекомендации:
- Добавить программу лояльности для VIP-клиентов

---

IV. КОММЕРЧЕСКИЙ УЧЕТ И АНАЛИТИКА
Status: ✅ DONE (95%)
- [✅] Система цен по типам продаж
- [✅] Шкала скидок по статусам
- [✅] Анализ продаж по номенклатуре
- [✅] Динамика роста/спада
- [✅] Прогноз спроса
- [✅] Прогноз оборачиваемости (ABC-анализ)
- [✅] Определение лидеров/аутсайдеров
- [✅] Автоматическое формирование акций
- [✅] Рекомендации по закупкам

GAP: МИНИМАЛЬНЫЙ

Рекомендации:
- Интеграция с внешними источниками данных о рыночных ценах

---

V. ФИНАНСОВАЯ АНАЛИТИКА
Status: ⚠️ PARTIAL (60%)
- [✅] Ценообразование с учетом себестоимости
- [✅] Управление шкалой скидок
- [✅] Отслеживание адекватности скидок (минимум 5% маржи)
- [✅] Анализ окупаемости товаров
- [⚠️] Распределение на легализованные/нелегализованные - ЧАСТИЧНО
- [❌] Расчет высвобожденного нала - НЕТ
- [❌] Бронирование ДС для подушки безопасности - НЕТ

GAP: КРИТИЧЕСКИЙ для 100% прозрачности
- Нет полного P&L отчета
- Нет учета операционных расходов
- Нет расчета чистой прибыли
- Нет системы управления кассами

Рекомендации: ⚠️ ПРИОРИТЕТ 1
1. Добавить модуль "Операционные расходы":
   - Зарплаты
   - Аренда
   - Таможня и логистика
   - Налоги
   - Прочие расходы

2. Реализовать систему касс:
   - Несколько касс (офис, склад, менеджеры)
   - Движение между кассами
   - Остатки в реальном времени
   - Инкассация

3. Финансовая отчетность:
   - P&L (прибыли и убытки) за период
   - Cash Flow (движение денежных средств)
   - Расчет свободного кэша

---

VI. АВТОМАТИЗАЦИЯ УЧЕТА СКЛАДА
Status: ✅ DONE (100%)
- [✅] Две базы: НД-40 и ИМ-40
- [✅] Единый нейминг по ГТД
- [✅] Артикулы партий
- [✅] Автоматическое удаление при обнулении
- [✅] Группировка товаров
- [✅] Оперативная обработка при операциях
- [✅] Фиксация остатков
- [✅] Бронирование по обеим базам
- [✅] Возврат товаров
- [✅] Разделение ИМ-40/НД-40 влияет на типы продаж
- [✅] Назначение ответственных
- [⚠️] Сроки инвентаризации - ЧАСТИЧНО

GAP: МИНИМАЛЬНЫЙ

---

VII. СИСТЕМА УЧЕТА ПРОДАЖ ПО ТИПАМ
Status: ✅ DONE (85%)

Типы продаж:
1. [✅] Перечисление/безнал - РЕАЛИЗОВАНО
   - Договоры
   - Карточки сделок
   - Бронирование на ИМ-40
   - Отслеживание оплат
   - Частичные отгрузки
   - Предзаказы

2. [✅] ККМ (с чеком) - РЕАЛИЗОВАНО
   - Фиксация продаж через кассу
   - Наличные и карты

3. [✅] НАЛ БЕЗ ЧЕКА / Click - РЕАЛИЗОВАНО
   - Продажи с НД-40
   - Переводы на карту

4. [✅] В ДОЛГ - РЕАЛИЗОВАНО
   - Карточки клиентов
   - Сроки оплаты
   - Контроль долгов
   - Перерасчет при просрочке

5. [✅] ПРЕДОПЛАТА - РЕАЛИЗОВАНО

GAP:
- Нет явной маркировки "черных" продаж для внутреннего учета
- Нет учета переводов на личные карты отдельно

Рекомендации:
- Добавить внутреннее поле "операционный тип" (official/grey/black)
- Указывать способ расчета: нал/карта компании/личная карта/криптовалюта

---

VIII. ФИКСАЦИЯ ПРОДАЖ МЕНЕДЖЕРАМИ
Status: ✅ DONE (100%)
- [✅] Менеджеры вносят данные через интерфейс
- [✅] Админ контролирует и корректирует
- [✅] Все продажи фиксируются

---

IX. БРОНИРОВАНИЕ ТОВАРОВ
Status: ✅ DONE (100%)
- [✅] Бронирование на обеих базах (НД-40, ИМ-40)
- [✅] Партионный учет при бронировании
- [✅] Сроки действия брони
- [✅] Отмена с возвратом

===============================================================================
ЧТО НЕОБХОДИМО ВЛАДЕЛЬЦУ ДЛЯ 100% КОНТРОЛЯ
===============================================================================

🎯 ДАШБОРД ВЛАДЕЛЬЦА (главный экран)
Status: ❌ MISSING - КРИТИЧНО

Что должно быть:
- Выручка за сегодня (всего)
- Прибыль за сегодня (с учетом расходов)
- Остаток в кассах (наличные)
- Остаток на счетах
- Долги клиентов (общая сумма)
- Долги поставщикам
- Стоимость товара на складе
- Количество продаж за день
- Средний чек
- Топ-5 товаров дня
- Алерты (критические остатки, просроченные долги)

Рекомендации: ⚠️ ПРИОРИТЕТ 1
Создать отдельный эндпоинт /api/dashboard/owner с агрегированными данными

---

💰 УПРАВЛЕНИЕ ФИНАНСАМИ
Status: ⚠️ PARTIAL (40%) - КРИТИЧНО

Что есть:
- [✅] Учет долгов клиентов
- [✅] Учет долгов поставщикам
- [✅] Фиксация оплат

Чего НЕТ:
- [❌] Множественные кассы (офис, склад, менеджеры на руках)
- [❌] Движение денег между кассами
- [❌] Операционные расходы (зарплаты, аренда, налоги)
- [❌] P&L отчет (прибыли и убытки)
- [❌] Cash Flow (движение денег)
- [❌] Расчет свободного кэша после обязательств

Рекомендации: ⚠️ ПРИОРИТЕТ 1
1. Создать таблицу Cashboxes (кассы):
   - Id, Name, Type (office/warehouse/manager), Currency
   - CurrentBalance, ResponsibleUser

2. Создать таблицу CashTransactions (движение денег):
   - Type (income/expense/transfer)
   - FromCashbox, ToCashbox
   - Amount, Category, Description
   - LinkedSaleId, LinkedPurchaseId

3. Создать таблицу OperatingExpenses (операционные расходы):
   - Type (salary/rent/utilities/transport/marketing/taxes/other)
   - Amount, Date, Description, IsRecurring

4. API эндпоинты:
   - GET /api/finance/cashboxes - остатки по кассам
   - POST /api/finance/transactions - движение денег
   - GET /api/finance/pl?from=&to= - P&L отчет
   - GET /api/finance/cashflow?from=&to= - Cash Flow

---

📱 УВЕДОМЛЕНИЯ ВЛАДЕЛЬЦУ
Status: ⚠️ PARTIAL (30%)

Что есть:
- [✅] Telegram интеграция
- [⚠️] Базовые уведомления

Чего НЕТ:
- [❌] Уведомление при КАЖДОЙ продаже
- [❌] Алерт при крупной сделке (>$X)
- [❌] Алерт при критических остатках
- [❌] Алерт при просроченных долгах
- [❌] Ежедневный автоматический отчет
- [❌] Еженедельная сводка

Рекомендации: ⚠️ ПРИОРИТЕТ 2
Расширить TelegramService:
1. При каждой продаже → краткое уведомление (сумма, менеджер, клиент)
2. При сделке >100000 UZS → детальный алерт
3. Раз в день в 21:00 → автоотчет (выручка, прибыль, топ-5 товаров)
4. При остатке <минимума → алерт о необходимости закупки

---

🔍 КОНТРОЛЬ МЕНЕДЖЕРОВ
Status: ⚠️ PARTIAL (60%)

Что есть:
- [✅] Учет продаж каждого менеджера
- [✅] Расчет бонусов
- [✅] Привязка клиентов

Чего НЕТ:
- [❌] Лог действий (что делал, когда)
- [❌] Время входа/выхода из системы
- [❌] KPI (конверсия, средний чек, выполнение плана)
- [❌] Рейтинг эффективности
- [❌] Система штрафов

Рекомендации: ⚠️ ПРИОРИТЕТ 3
1. Добавить таблицу AuditLog:
   - UserId, Action, EntityType, EntityId, OldValue, NewValue, Timestamp

2. KPI эндпоинт /api/managers/kpi:
   - Количество сделок
   - Средний чек
   - Конверсия (продажи к броням)
   - Выполнение плана

---

📊 ОТЧЕТЫ ДЛЯ ПРИНЯТИЯ РЕШЕНИЙ
Status: ✅ DONE (80%)

Что есть:
- [✅] ABC-анализ товаров
- [✅] Прогноз спроса
- [✅] Анализ маржинальности
- [✅] Топ товары/клиенты/менеджеры

Чего НЕТ:
- [❌] Финансовый P&L
- [❌] Сравнение периодов (месяц к месяцу)
- [❌] Прогноз выручки
- [❌] ROI по товарным группам

Рекомендации:
Добавить эндпоинт /api/reports/comparison для сравнения периодов

---

🔐 БЕЗОПАСНОСТЬ И АУДИТ
Status: ⚠️ PARTIAL (50%)

Что есть:
- [✅] JWT аутентификация
- [✅] Базовые роли (Admin, Manager)
- [✅] Права доступа

Чего НЕТ:
- [❌] Полный аудит-лог всех действий
- [❌] Защита от удаления данных (soft delete)
- [❌] История изменений критичных данных
- [❌] Роль Owner с доступом ко ВСЕМУ

Рекомендации: ⚠️ ПРИОРИТЕТ 2
1. Все удаления делать через soft delete (IsDeleted flag)
2. Логировать ВСЕ изменения важных сущностей (Sales, Purchases, Inventory)
3. Добавить роль Owner с полным доступом включая себестоимость

===============================================================================
ИТОГОВАЯ МАТРИЦА ГОТОВНОСТИ
===============================================================================

Модуль                          | Статус   | Готовность | GAP
--------------------------------|----------|------------|------------------
Складской учет                  | ✅ DONE  | 95%        | Инвентаризация
Продажи                         | ✅ DONE  | 90%        | Типизация продаж
Клиентская база                 | ✅ DONE  | 100%       | -
Коммерческая аналитика          | ✅ DONE  | 95%        | Минимальный
Финансовая аналитика            | ⚠️ PARTIAL| 60%       | КРИТИЧНЫЙ
Система бронирования            | ✅ DONE  | 100%       | -
Бонусы менеджеров               | ✅ DONE  | 100%       | -
Управление кассами              | ❌ MISSING| 0%        | КРИТИЧНЫЙ
Операционные расходы            | ❌ MISSING| 0%        | КРИТИЧНЫЙ
Дашборд владельца               | ❌ MISSING| 0%        | КРИТИЧНЫЙ
Telegram уведомления            | ⚠️ PARTIAL| 30%       | Важный
Email уведомления               | ❌ MISSING| 0%        | Важный
Контроль менеджеров (KPI)       | ⚠️ PARTIAL| 60%       | Средний
Аудит действий                  | ⚠️ PARTIAL| 50%       | Важный
Финансовая отчетность (P&L)     | ❌ MISSING| 0%        | КРИТИЧНЫЙ
Возвраты товаров                | ❌ MISSING| 0%        | Средний
Инвентаризация                  | ⚠️ PARTIAL| 40%       | Важный

===============================================================================
ОБЩАЯ ГОТОВНОСТЬ: 75%
===============================================================================

Основной функционал работает: ✅
- Склад, продажи, клиенты - РАБОТАЮТ
- Можно вести бизнес на базовом уровне

Критичные GAP-ы для 100% прозрачности: ❌
- Нет полной финансовой картины
- Нет управления кассами
- Нет учета всех расходов
- Нет дашборда владельца

===============================================================================
ПЛАН ДОРАБОТКИ ДО 100%
===============================================================================

🔴 ФАЗА 1: ФИНАНСОВАЯ ПРОЗРАЧНОСТЬ (приоритет 1)
Сроки: 3-4 дня
1. Модуль управления кассами
2. Учет операционных расходов
3. P&L отчет (прибыли и убытки)
4. Cash Flow отчет
5. Дашборд владельца

🟡 ФАЗА 2: КОНТРОЛЬ И УВЕДОМЛЕНИЯ (приоритет 2)
Сроки: 2-3 дня
1. Расширенные Telegram уведомления
2. Ежедневные автоотчеты
3. Полный аудит-лог
4. KPI менеджеров

🟢 ФАЗА 3: ДОРАБОТКИ (приоритет 3)
Сроки: 2-3 дня
1. Полная инвентаризация
2. Возвраты товаров
3. Email уведомления
4. Программа лояльности

===============================================================================
ВЫВОД
===============================================================================

Проект ГОТОВ на 75% для базовых операций.

Для достижения 100% прозрачности и контроля бизнеса нужно реализовать:
⚠️ КРИТИЧНО (без этого владелец не видит полную картину):
   - Управление кассами и финансовыми потоками
   - Учет операционных расходов
   - P&L и Cash Flow отчеты
   - Дашборд владельца

После реализации ФАЗЫ 1 готовность будет 90%.
После ФАЗЫ 2 - 95%.
После ФАЗЫ 3 - 100%.

Рекомендация: НАЧАТЬ С ФАЗЫ 1 - это даст владельцу полный финансовый контроль.