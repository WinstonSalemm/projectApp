# üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –£–ß–ï–¢–ê "–°–ï–†–´–•" –û–ü–ï–†–ê–¶–ò–ô

## –ü–†–û–ë–õ–ï–ú–ê:
–°–µ–π—á–∞—Å **–í–°–Ø** –≤—ã—Ä—É—á–∫–∞ –∏–¥–µ—Ç –≤ –Ω–∞–ª–æ–≥–æ–≤—ã–π —Ä–∞—Å—á–µ—Ç, –≤–∫–ª—é—á–∞—è "—Å–µ—Ä—ã–µ" –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ª–∏—á–Ω—ã–µ –±–µ–∑ —á–µ–∫–∞).
–í–ª–∞–¥–µ–ª–µ—Ü –ø–ª–∞—Ç–∏—Ç –Ω–∞–ª–æ–≥–∏ —Å –¥–µ–Ω–µ–≥, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å "–≤ –∫–∞—Ä–º–∞–Ω–µ".

## –†–ï–®–ï–ù–ò–ï:

### 1. –†–∞–∑–¥–µ–ª–∏—Ç—å –≤—ã—Ä—É—á–∫—É –Ω–∞ "–±–µ–ª—É—é" –∏ "—Å–µ—Ä—É—é"

```csharp
// –í TaxCalculationService.cs –º–µ—Ç–æ–¥ CalculateTaxReportAsync()

// –ë–ï–õ–ê–Ø –≤—ã—Ä—É—á–∫–∞ (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è)
var whiteSales = sales.Where(s => 
    s.PaymentType == PaymentType.CashWithReceipt ||
    s.PaymentType == PaymentType.CardWithReceipt ||
    s.PaymentType == PaymentType.ClickWithReceipt ||
    s.PaymentType == PaymentType.Payme ||
    s.PaymentType == PaymentType.Contract
).ToList();

// –°–ï–†–ê–Ø –≤—ã—Ä—É—á–∫–∞ (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è)
var greySales = sales.Where(s => 
    s.PaymentType == PaymentType.CashNoReceipt ||
    s.PaymentType == PaymentType.Click ||
    s.PaymentType == PaymentType.ClickNoReceipt
).ToList();

// –†–∞—Å—á–µ—Ç –Ω–∞–ª–æ–≥–æ–≤ –¢–û–õ–¨–ö–û —Å –±–µ–ª–æ–π –≤—ã—Ä—É—á–∫–∏
report.TotalRevenue = whiteSales.Sum(s => s.Total);
report.GreyRevenue = greySales.Sum(s => s.Total);  // –î–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
report.RealTotalRevenue = report.TotalRevenue + report.GreyRevenue;
```

### 2. –û–±–Ω–æ–≤–∏—Ç—å TaxReportDto

```csharp
public class TaxReportDto
{
    // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è...
    
    // –ù–û–í–´–ï –ü–û–õ–Ø:
    public decimal GreyRevenue { get; set; }           // "–°–µ—Ä–∞—è" –≤—ã—Ä—É—á–∫–∞
    public decimal RealTotalRevenue { get; set; }      // –†–µ–∞–ª—å–Ω–∞—è –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞
    public decimal WhiteRevenuePercent { get; set; }   // % –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –≤—ã—Ä—É—á–∫–∏
    public decimal TaxSavings { get; set; }            // –≠–∫–æ–Ω–æ–º–∏—è –Ω–∞ –Ω–∞–ª–æ–≥–∞—Ö
}
```

### 3. –ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞:

**–î–æ–ø—É—Å—Ç–∏–º –∑–∞ –¥–µ–Ω—å:**
- –ë–µ–ª–∞—è –≤—ã—Ä—É—á–∫–∞: 5,000,000 UZS
- –°–µ—Ä–∞—è –≤—ã—Ä—É—á–∫–∞: 3,000,000 UZS
- –ò—Ç–æ–≥–æ: 8,000,000 UZS

**–° —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π (–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û):**
```
–í—ã—Ä—É—á–∫–∞: 8,000,000 UZS
–ù–î–° (12%): 857,142 UZS
–ù–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å: ~300,000 UZS
–ò—Ç–æ–≥–æ –Ω–∞–ª–æ–≥–æ–≤: ~1,157,142 UZS
```

**–° –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π:**
```
–ë–µ–ª–∞—è –≤—ã—Ä—É—á–∫–∞: 5,000,000 UZS
–ù–î–° (12%): 535,714 UZS
–ù–∞–ª–æ–≥ –Ω–∞ –ø—Ä–∏–±—ã–ª—å: ~187,500 UZS
–ò—Ç–æ–≥–æ –Ω–∞–ª–æ–≥–æ–≤: ~723,214 UZS

–°–µ—Ä–∞—è –≤—ã—Ä—É—á–∫–∞: 3,000,000 UZS (–Ω–∞–ª–æ–≥–æ–≤ –ù–ï–¢)
–≠–∫–æ–Ω–æ–º–∏—è: ~433,928 UZS üí∞
```

### 4. –î–æ–±–∞–≤–∏—Ç—å –≤ –¥–∞—à–±–æ—Ä–¥ –≤–ª–∞–¥–µ–ª—å—Ü–∞

```csharp
// –í OwnerDashboardService.cs

public class OwnerDashboardDto
{
    // ...—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
    
    // –ù–û–í–´–ï:
    public decimal TodayWhiteRevenue { get; set; }    // –ë–µ–ª–∞—è –≤—ã—Ä—É—á–∫–∞
    public decimal TodayGreyRevenue { get; set; }     // –°–µ—Ä–∞—è –≤—ã—Ä—É—á–∫–∞
    public decimal WhiteRevenueRatio { get; set; }    // % –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –≤—ã—Ä—É—á–∫–∏
}
```

## –†–ò–°–ö–ò –ò –í–ê–ñ–ù–û:

‚ö†Ô∏è **–Æ–†–ò–î–ò–ß–ï–°–ö–ò:**
- –°–µ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ = –Ω–∞–ª–æ–≥–æ–≤–æ–µ –ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏–µ
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–æ–≥–æ–≤–æ–π
- –®—Ç—Ä–∞—Ñ—ã –∑–∞ –Ω–µ—É–ø–ª–∞—Ç—É –ù–î–°

‚ö†Ô∏è **–í –°–ò–°–¢–ï–ú–ï:**
- –î–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞—â–∏—â–µ–Ω—ã
- –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞
- –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º

‚úÖ **–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê:**
- –†–µ–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –±–∏–∑–Ω–µ—Å–∞
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –Ω–∞–ª–æ–≥–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏
- –ö–æ–Ω—Ç—Ä–æ–ª—å "—Å–µ—Ä–æ–≥–æ" –∫—ç—à–∞
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–ª–æ–≥–æ–≤

## –ö–ê–ö –í–ù–ï–î–†–ò–¢–¨:

1. –û–±–Ω–æ–≤–∏—Ç—å `TaxReportDto` (–¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è)
2. –ò–∑–º–µ–Ω–∏—Ç—å `CalculateTaxReportAsync()` (—Ä–∞–∑–¥–µ–ª–∏—Ç—å –≤—ã—Ä—É—á–∫—É)
3. –û–±–Ω–æ–≤–∏—Ç—å `OwnerDashboardService` (–¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏)
4. –û–±–Ω–æ–≤–∏—Ç—å UI (–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ)
5. –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å-–∫–æ–Ω—Ç—Ä–æ–ª—å (—Ç–æ–ª—å–∫–æ Owner –≤–∏–¥–∏—Ç —Å–µ—Ä—É—é –≤—ã—Ä—É—á–∫—É)

## –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –ª–µ–≥–∞–ª–∏–∑–æ–≤–∞—Ç—å):

### –í–∞—Ä–∏–∞–Ω—Ç A: "–õ–µ–≥–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ä–∞—Å—Ö–æ–¥—ã"
```
–°–µ—Ä–∞—è –≤—ã—Ä—É—á–∫–∞ ‚Üí "–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã" ‚Üí –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞–ª–æ–≥–æ–æ–±–ª–∞–≥–∞–µ–º–æ–π –±–∞–∑—ã
```

### –í–∞—Ä–∏–∞–Ω—Ç B: "–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞"
```
–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –£–°–ù (4-7.5% –æ—Ç –í–°–ï–ô –≤—ã—Ä—É—á–∫–∏, –±–µ–∑ –ù–î–°)
–ü—Ä–æ—â–µ –ø–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥–∏, –º–µ–Ω—å—à–µ —Ä–∏—Å–∫–æ–≤
```

### –í–∞—Ä–∏–∞–Ω—Ç C: "Hybrid –ø–æ–¥—Ö–æ–¥"
```
–ß–∞—Å—Ç—å —Å–µ—Ä–æ–π –≤—ã—Ä—É—á–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ –±–µ–ª—É—é –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ
–ù–∞–ø—Ä–∏–º–µ—Ä: 70% —Å–µ—Ä–æ–π, 30% –±–µ–ª–æ–π ‚Üí –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ 50/50
```

## –í–´–í–û–î:

–°–µ–π—á–∞—Å —Å–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç –Ω–∞–ª–æ–≥–∏ **–°–û –í–°–ï–ô** –≤—ã—Ä—É—á–∫–∏.
–≠—Ç–æ –ª–∏–±–æ:
1. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ, –µ—Å–ª–∏ –≤–ª–∞–¥–µ–ª–µ—Ü –ø–ª–∞—Ç–∏—Ç –í–°–ï –Ω–∞–ª–æ–≥–∏
2. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –µ—Å–ª–∏ –µ—Å—Ç—å —Å–µ—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ù—É–∂–Ω–æ —è–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å "–±–µ–ª—É—é" –∏ "—Å–µ—Ä—É—é" –≤—ã—Ä—É—á–∫—É –¥–ª—è —á–µ—Å—Ç–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.**
