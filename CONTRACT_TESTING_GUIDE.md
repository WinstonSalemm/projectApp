# üìã –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –°–ò–°–¢–ï–ú–´ –î–û–ì–û–í–û–†–û–í

## ‚úÖ –ß–¢–û –ì–û–¢–û–í–û:

### Backend (100%):
- ‚úÖ –ú–æ–¥–µ–ª–∏: Contract, ContractItem, ContractReservation
- ‚úÖ Enums: ContractType (Open/Closed), ContractItemStatus
- ‚úÖ –°–µ—Ä–≤–∏—Å —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –∏–∑ –ø–∞—Ä—Ç–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–æ–≤ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –¥–æ–≥–æ–≤–æ—Ä–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º (–æ–ø–ª–∞—Ç–∞ + –æ—Ç–≥—Ä—É–∑–∫–∞ + ND40‚ÜíIM40)
- ‚úÖ API endpoints –≥–æ—Ç–æ–≤—ã
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –Ω–∞ Railway

### Frontend MAUI (–±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è):
- ‚úÖ ContractsPage - —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤
- ‚úÖ ContractsViewModel - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –æ–ø–ª–∞—Ç—ã –∏ –æ—Ç–≥—Ä—É–∑–∫–∏
- ‚úÖ –¶–≤–µ—Ç–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤

---

## üß™ –ö–ê–ö –¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

### 1. –ü—Ä–æ–≤–µ—Ä—å API —á–µ—Ä–µ–∑ Railway:

**–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤:**
```bash
GET https://tranquil-upliftment-production.up.railway.app/api/contracts
Authorization: Bearer YOUR_TOKEN
```

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä:**
```bash
POST https://tranquil-upliftment-production.up.railway.app/api/contracts
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN

{
  "Type": "Closed",
  "ContractNumber": "TEST-001",
  "ClientId": 1,
  "Description": "iPhone 15 Pro - –ø—Ä–∏–¥—ë—Ç —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é",
  "Items": [
    {
      "Name": "iPhone 15 Pro 256GB",
      "Description": "–û–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Å—Ç–∞–≤–∫–∞ 05.11.2025",
      "Qty": 5,
      "UnitPrice": 15000000
    }
  ]
}
```

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä:**
```bash
POST https://tranquil-upliftment-production.up.railway.app/api/contracts
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN

{
  "Type": "Open",
  "ContractNumber": "TEST-002",
  "ClientId": 2,
  "TotalAmount": 100000000,
  "Note": "–û—Ç–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä –Ω–∞ 100 –º–ª–Ω - –∫–ª–∏–µ–Ω—Ç –≤—ã–±–∏—Ä–∞–µ—Ç –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞",
  "Items": []
}
```

**–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä:**
```bash
POST https://tranquil-upliftment-production.up.railway.app/api/contracts/2/items
Content-Type: application/json
Authorization: Bearer YOUR_TOKEN

{
  "ProductId": 1,
  "Qty": 10,
  "UnitPrice": 150000
}
```

**–û—Ç–º–µ–Ω–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä (–≤–µ—Ä–Ω—É—Ç—å —Ç–æ–≤–∞—Ä –≤ –ø–∞—Ä—Ç–∏–∏):**
```bash
POST https://tranquil-upliftment-production.up.railway.app/api/contracts/1/cancel
Authorization: Bearer YOUR_TOKEN
```

---

### 2. –ü—Ä–æ–≤–µ—Ä—å –≤ MAUI:

**–û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–æ–≥–æ–≤–æ—Ä–æ–≤:**
```csharp
// –í –∫–æ–¥–µ –∏–ª–∏ —á–µ—Ä–µ–∑ Shell navigation:
await Shell.Current.GoToAsync("//contracts/test");
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å:**
- ‚úÖ –°–ø–∏—Å–æ–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–ø–ª–∞—Ç—É –∏ –æ—Ç–≥—Ä—É–∑–∫—É
- ‚úÖ –°—Ç–∞—Ç—É—Å—ã —Ü–≤–µ—Ç–Ω—ã–µ (Active=–∑–µ–ª–µ–Ω—ã–π, Closed=—Å–µ—Ä—ã–π, Cancelled=–∫—Ä–∞—Å–Ω—ã–π)
- ‚úÖ –ö–ª–∏–∫ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏
- ‚úÖ –ö–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –°–¶–ï–ù–ê–†–ò–ò –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø:

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ó–∞–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä (—Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç)
1. –°–æ–∑–¥–∞–π –¥–æ–≥–æ–≤–æ—Ä Type=Closed —Å —Ç–æ–≤–∞—Ä–æ–º –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥–µ
2. –£–∫–∞–∂–∏ Description –¥–ª—è —Ç–æ–≤–∞—Ä–∞
3. –î–æ–≥–æ–≤–æ—Ä —Å–æ–∑–¥–∞–µ—Ç—Å—è –ë–ï–ó —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏—è (—Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç)
4. –¢–æ–≤–∞—Ä –ø–æ—è–≤–∏–ª—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ ‚Üí –¥–æ–±–∞–≤—å –µ–≥–æ –≤ –¥–æ–≥–æ–≤–æ—Ä ‚Üí —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –û—Ç–∫—Ä—ã—Ç—ã–π –¥–æ–≥–æ–≤–æ—Ä (—Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞)
1. –°–æ–∑–¥–∞–π –¥–æ–≥–æ–≤–æ—Ä Type=Open —Å –ª–∏–º–∏—Ç–æ–º 100 –º–ª–Ω
2. –î–æ–±–∞–≤—å —Ç–æ–≤–∞—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ (ProductId —É–∫–∞–∑–∞–Ω)
3. –¢–æ–≤–∞—Ä –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è –∏–∑ –ø–∞—Ä—Ç–∏–π (FIFO)
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–∞ —Å–∫–ª–∞–¥–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–º–µ–Ω–∞ –¥–æ–≥–æ–≤–æ—Ä–∞
1. –°–æ–∑–¥–∞–π –¥–æ–≥–æ–≤–æ—Ä —Å —Ç–æ–≤–∞—Ä–æ–º –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–æ–≤–∞—Ä –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω (—É–º–µ–Ω—å—à–∏–ª—Å—è –Ω–∞ —Å–∫–ª–∞–¥–µ)
3. –û—Ç–º–µ–Ω–∏ –¥–æ–≥–æ–≤–æ—Ä —á–µ—Ä–µ–∑ API: POST /api/contracts/{id}/cancel
4. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–æ–≤–∞—Ä –í–ï–†–ù–£–õ–°–Ø –Ω–∞ —Å–∫–ª–∞–¥ (–≤ —Ç–µ –∂–µ –ø–∞—Ä—Ç–∏–∏)

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ó–∞–∫—Ä—ã—Ç–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞
1. –°–æ–∑–¥–∞–π –¥–æ–≥–æ–≤–æ—Ä
2. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ /api/contracts/{id}/close
3. –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞: "–ù–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø–ª–∞—á–µ–Ω"
4. –î–æ–±–∞–≤—å –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ /api/contracts/{id}/payments
5. –î–æ–±–∞–≤—å –æ—Ç–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ /api/contracts/{id}/deliveries
6. –ü–µ—Ä–µ–≤–µ–¥–∏ –ø–∞—Ä—Ç–∏–∏ –≤ IM-40
7. –¢–µ–ø–µ—Ä—å –∑–∞–∫—Ä—ã—Ç–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üìä –ü–†–û–í–ï–†–ö–ê –î–ê–ù–ù–´–• –í –ë–î:

**–ü–æ—Å–º–æ—Ç—Ä–∏ –¥–æ–≥–æ–≤–æ—Ä–∞:**
```sql
SELECT * FROM Contracts ORDER BY CreatedAt DESC;
```

**–ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–∑–∏—Ü–∏–∏:**
```sql
SELECT * FROM ContractItems WHERE ContractId = 1;
```

**–ü–æ—Å–º–æ—Ç—Ä–∏ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏–∏:**
```sql
SELECT cr.*, b.ProductId, b.Qty as BatchQty, b.Register
FROM ContractReservations cr
JOIN Batches b ON cr.BatchId = b.Id
WHERE cr.ContractItemId IN (SELECT Id FROM ContractItems WHERE ContractId = 1);
```

**–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ç–æ–≤–∞—Ä –≤–µ—Ä–Ω—É–ª—Å—è –ø–æ—Å–ª–µ –æ—Ç–º–µ–Ω—ã:**
```sql
SELECT * FROM ContractReservations WHERE ReturnedAt IS NOT NULL;
```

---

## üêõ –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:

1. ‚ùå **UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–æ–≤** - –ø–æ–∫–∞ –Ω–µ—Ç (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä)
2. ‚ùå **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ –ø–æ–∑–∏—Ü–∏—è–º** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–±—â–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç
3. ‚ùå **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏** - –ø–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç OrgName –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞
4. ‚ö†Ô∏è **–†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å ProductId

---

## ‚ú® –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª):
- [ ] UI —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–≥–æ–≤–æ—Ä–∞ (—Ñ–æ—Ä–º–∞ —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞)
- [ ] UI –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- [ ] UI –¥–µ—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ —Å –∏—Å—Ç–æ—Ä–∏–µ–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (—É–ª—É—á—à–µ–Ω–∏—è):
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–º–µ–Ω–∏ –∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ Clients
- [ ] –ö–Ω–æ–ø–∫–∏ –æ–ø–ª–∞—Ç—ã/–æ—Ç–≥—Ä—É–∑–∫–∏ –ø—Ä—è–º–æ –≤ MAUI
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ):
- [ ] –ü–µ—á–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä–∞ –≤ PDF
- [ ] –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ–≥–æ–≤–æ—Ä–∞
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

---

## üéâ –ì–û–¢–û–í–û –ö PRODUCTION?

### Backend: ‚úÖ –î–ê
- –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–º–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- API –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω

### Frontend: ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–æ–∂–Ω–æ –¥–µ–ø–ª–æ–∏—Ç—å backend –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ API, UI –¥–æ–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ.
