<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProjectApp.Client.Maui.Views.AnalyticsPage"
             Title="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°"
             BackgroundColor="{DynamicResource Color.Background}">
  
  <Grid RowDefinitions="Auto,*" Padding="0">
    <!-- Ð¢Ð°Ð±Ñ‹ -->
    <HorizontalStackLayout Grid.Row="0" Spacing="0" BackgroundColor="{DynamicResource Color.Surface}">
      <Border x:Name="TabFinance" Padding="20,16" BackgroundColor="{DynamicResource Color.Primary}">
        <Border.GestureRecognizers>
          <TapGestureRecognizer Tapped="OnFinanceTabTapped"/>
        </Border.GestureRecognizers>
        <Label Text="Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹" TextColor="White" FontSize="16" FontAttributes="Bold"/>
      </Border>
      
      <Border x:Name="TabManagers" Padding="20,16" BackgroundColor="Transparent">
        <Border.GestureRecognizers>
          <TapGestureRecognizer Tapped="OnManagersTabTapped"/>
        </Border.GestureRecognizers>
        <Label Text="ÐœÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ñ‹" TextColor="{DynamicResource Color.Text.Primary}" FontSize="16"/>
      </Border>
      
      <Border x:Name="TabProducts" Padding="20,16" BackgroundColor="Transparent">
        <Border.GestureRecognizers>
          <TapGestureRecognizer Tapped="OnProductsTabTapped"/>
        </Border.GestureRecognizers>
        <Label Text="Ð¢Ð¾Ð²Ð°Ñ€Ñ‹" TextColor="{DynamicResource Color.Text.Primary}" FontSize="16"/>
      </Border>
    </HorizontalStackLayout>

    <!-- ÐšÐ¾Ð½Ñ‚ÐµÐ½Ñ‚ -->
    <Grid Grid.Row="1" x:Name="ContentArea">
      <!-- Finance Tab Content -->
      <ScrollView x:Name="FinanceContent" IsVisible="True" Padding="16">
        <VerticalStackLayout Spacing="16">
          <Label Text="ðŸ“Š Ð¤Ð¸Ð½Ð°Ð½ÑÐ¾Ð²Ð°Ñ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°" FontSize="24" FontAttributes="Bold" Margin="0,0,0,8"/>
          
          <!-- ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð° -->
          <HorizontalStackLayout Spacing="12" Margin="0,0,0,16">
            <Border x:Name="FinancePeriodMonth" Padding="16,8" BackgroundColor="{DynamicResource Color.Primary}" StrokeThickness="0" StrokeShape="RoundRectangle 20">
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnFinanceMonthTapped"/>
              </Border.GestureRecognizers>
              <Label Text="ÐœÐµÑÑÑ†" TextColor="White" FontSize="14" FontAttributes="Bold"/>
            </Border>
            
            <Border x:Name="FinancePeriodYear" Padding="16,8" BackgroundColor="Transparent" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" StrokeShape="RoundRectangle 20">
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnFinanceYearTapped"/>
              </Border.GestureRecognizers>
              <Label Text="Ð“Ð¾Ð´" TextColor="{DynamicResource Color.Text.Primary}" FontSize="14"/>
            </Border>
            
            <Border Padding="16,8" BackgroundColor="Transparent" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" StrokeShape="RoundRectangle 20">
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnFinanceRefreshTapped"/>
              </Border.GestureRecognizers>
              <Label Text="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" TextColor="{DynamicResource Color.Text.Primary}" FontSize="14"/>
            </Border>
          </HorizontalStackLayout>
          
          <!-- KPI ÐºÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ¸ -->
          <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="12">
            <!-- Ð’Ñ‹Ñ€ÑƒÑ‡ÐºÐ° -->
            <Border Grid.Row="0" Grid.Column="0" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" StrokeShape="RoundRectangle 12">
              <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ’° Ð’Ñ‹Ñ€ÑƒÑ‡ÐºÐ°" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                <Label Text="{Binding FinanceRevenue, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="20" FontAttributes="Bold"/>
              </VerticalStackLayout>
            </Border>
            
            <!-- Ð’Ð°Ð»Ð¾Ð²Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ -->
            <Border Grid.Row="0" Grid.Column="1" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" StrokeShape="RoundRectangle 12">
              <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ“ˆ Ð’Ð°Ð». Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                <Label Text="{Binding FinanceGrossProfit, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="20" FontAttributes="Bold" TextColor="{DynamicResource Color.Success}"/>
              </VerticalStackLayout>
            </Border>
            
            <!-- ÐœÐ°Ñ€Ð¶Ð° -->
            <Border Grid.Row="1" Grid.Column="0" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" StrokeShape="RoundRectangle 12">
              <VerticalStackLayout Spacing="8">
                <Label Text="ðŸŽ¯ ÐœÐ°Ñ€Ð¶Ð°" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                <Label Text="{Binding FinanceMargin, StringFormat='{0:F1}%'}" FontSize="20" FontAttributes="Bold" TextColor="{DynamicResource Color.Primary}"/>
              </VerticalStackLayout>
            </Border>
            
            <!-- ÐŸÑ€Ð¾Ð´Ð°Ð¶ -->
            <Border Grid.Row="1" Grid.Column="1" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" StrokeShape="RoundRectangle 12">
              <VerticalStackLayout Spacing="8">
                <Label Text="ðŸ›’ ÐŸÑ€Ð¾Ð´Ð°Ð¶" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                <Label Text="{Binding FinanceSalesCount}" FontSize="20" FontAttributes="Bold"/>
              </VerticalStackLayout>
            </Border>
          </Grid>
          
          <!-- Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° (Ð²ÐµÑ€Ñ‚Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·) -->
          <Border StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" Margin="0,8,0,0" StrokeShape="RoundRectangle 12">
            <VerticalStackLayout Spacing="12">
              <Label Text="ðŸ“Š Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð²Ñ‹Ñ€ÑƒÑ‡ÐºÐ¸" FontSize="18" FontAttributes="Bold"/>
              
              <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto" ColumnSpacing="12" RowSpacing="8">
                <!-- Ð¡ÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ -->
                <Label Grid.Row="0" Grid.Column="0" Text="ðŸ’¸ Ð¡ÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ:" FontSize="14" VerticalTextAlignment="Center"/>
                <ProgressBar Grid.Row="0" Grid.Column="1" Progress="{Binding FinanceCostPercent}" ProgressColor="{DynamicResource Color.Error}" HeightRequest="20" VerticalOptions="Center"/>
                <Label Grid.Row="0" Grid.Column="2" Text="{Binding FinanceCostPercent, StringFormat='{0:P0}'}" FontSize="14" FontAttributes="Bold" VerticalTextAlignment="Center"/>
                
                <!-- Ð’Ð°Ð»Ð¾Ð²Ð°Ñ Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ -->
                <Label Grid.Row="1" Grid.Column="0" Text="âœ… Ð’Ð°Ð». Ð¿Ñ€Ð¸Ð±Ñ‹Ð»ÑŒ:" FontSize="14" VerticalTextAlignment="Center"/>
                <ProgressBar Grid.Row="1" Grid.Column="1" Progress="{Binding FinanceProfitPercent}" ProgressColor="{DynamicResource Color.Success}" HeightRequest="20" VerticalOptions="Center"/>
                <Label Grid.Row="1" Grid.Column="2" Text="{Binding FinanceProfitPercent, StringFormat='{0:P0}'}" FontSize="14" FontAttributes="Bold" VerticalTextAlignment="Center"/>
              </Grid>
            </VerticalStackLayout>
          </Border>
          
        </VerticalStackLayout>
      </ScrollView>

      <!-- Managers Tab Content -->
      <ScrollView x:Name="ManagersContent" IsVisible="False" Padding="16">
        <VerticalStackLayout Spacing="16">
          <Label Text="ðŸ‘¥ ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° Ð¿Ð¾ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð°Ð¼" FontSize="24" FontAttributes="Bold" Margin="0,0,0,8"/>
          
          <!-- ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡Ð°Ñ‚ÐµÐ»ÑŒ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ð° -->
          <HorizontalStackLayout Spacing="12" Margin="0,0,0,16">
            <Border x:Name="PeriodMonth" Padding="16,8" BackgroundColor="{DynamicResource Color.Primary}" StrokeThickness="0" StrokeShape="RoundRectangle 20">
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnMonthPeriodTapped"/>
              </Border.GestureRecognizers>
              <Label Text="ÐœÐµÑÑÑ†" TextColor="White" FontSize="14" FontAttributes="Bold"/>
            </Border>
            
            <Border x:Name="PeriodYear" Padding="16,8" BackgroundColor="Transparent" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" StrokeShape="RoundRectangle 20">
              <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnYearPeriodTapped"/>
              </Border.GestureRecognizers>
              <Label Text="Ð“Ð¾Ð´" TextColor="{DynamicResource Color.Text.Primary}" FontSize="14"/>
            </Border>
          </HorizontalStackLayout>
          
          <!-- Ð•ÑÐ»Ð¸ Ð½ÐµÑ‚ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ - Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÐ¼ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ -->
          <VerticalStackLayout IsVisible="{Binding HasNoStats}" Padding="32" Spacing="12" HorizontalOptions="Center">
            <Label Text="ðŸ“Š" FontSize="48" HorizontalTextAlignment="Center"/>
            <Label Text="ÐŸÑ€Ð¾Ð´Ð°Ð¶ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚" FontSize="20" FontAttributes="Bold" HorizontalTextAlignment="Center"/>
            <Label Text="ÐÐµÑ‚Ñƒ Ñ€ÑƒÑ‡ÐµÐº, Ð½ÐµÑ‚ ÐºÐ¾Ð½Ñ„ÐµÑ‚ÐºÐ¸" FontSize="16" TextColor="{DynamicResource Color.Text.Secondary}" HorizontalTextAlignment="Center" Margin="0,4,0,8"/>
            <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð¿ÐµÑ€Ð²ÑƒÑŽ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ñƒ Ð´Ð»Ñ Ð¾Ñ‚Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}" HorizontalTextAlignment="Center"/>
          </VerticalStackLayout>
          
          <!-- Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ñ€Ð¾Ð´Ð°Ð¶ -->
          <Border IsVisible="{Binding HasStats}" StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" Margin="0,0,0,16" StrokeShape="RoundRectangle 12">
            <VerticalStackLayout Spacing="12">
              <Label Text="ðŸ“Š Ð“Ñ€Ð°Ñ„Ð¸Ðº Ð¿Ñ€Ð¾Ð´Ð°Ð¶" FontSize="18" FontAttributes="Bold"/>
              <Label Text="{Binding PeriodLabel}" FontSize="12" TextColor="{DynamicResource Color.Text.Secondary}"/>
              
              <!-- Ð‘Ð°Ñ€Ñ‹ Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð° -->
              <VerticalStackLayout BindableLayout.ItemsSource="{Binding ManagerStats}" Spacing="8" Margin="0,12,0,0">
                <BindableLayout.ItemTemplate>
                  <DataTemplate>
                    <Grid ColumnDefinitions="120,*,80" ColumnSpacing="12" HeightRequest="40">
                      <!-- Ð˜Ð¼Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð° -->
                      <Label Grid.Column="0" Text="{Binding ManagerName}" FontSize="13" VerticalTextAlignment="Center" LineBreakMode="TailTruncation"/>
                      
                      <!-- Ð’Ð¸Ð·ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±Ð°Ñ€ -->
                      <Grid Grid.Column="1" VerticalOptions="Center">
                        <BoxView HeightRequest="24" HorizontalOptions="Start" WidthRequest="{Binding BarWidth}" Color="{DynamicResource Color.Primary}" CornerRadius="4"/>
                      </Grid>
                      
                      <!-- Ð¡ÑƒÐ¼Ð¼Ð° -->
                      <Label Grid.Column="2" Text="{Binding TotalRevenue, StringFormat='{0:N0}'}" FontSize="12" FontAttributes="Bold" VerticalTextAlignment="Center" HorizontalTextAlignment="End"/>
                    </Grid>
                  </DataTemplate>
                </BindableLayout.ItemTemplate>
              </VerticalStackLayout>
            </VerticalStackLayout>
          </Border>
          
          <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð¾Ð² -->
          <VerticalStackLayout BindableLayout.ItemsSource="{Binding ManagerStats}" Spacing="12">
          
          <BindableLayout.ItemTemplate>
            <DataTemplate>
              <Border StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" Margin="0,0,0,12" StrokeShape="RoundRectangle 12">
                <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" RowSpacing="12">
                  <!-- Ð˜Ð¼Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð° -->
                  <Label Grid.Row="0" Text="{Binding ManagerName}" FontSize="20" FontAttributes="Bold"/>
                  
                  <!-- ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚ -->
                  <Grid Grid.Row="1" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                    <Label Grid.Column="0" Text="ðŸ’° ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ð±Ð¾Ñ€Ð¾Ñ‚:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                    <Label Grid.Column="1" Text="{Binding TotalRevenue, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="14" FontAttributes="Bold"/>
                  </Grid>
                  
                  <!-- ÐžÐ±Ð¾Ñ€Ð¾Ñ‚ ÑÐ²Ð¾Ð¸Ð¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼ -->
                  <Grid Grid.Row="2" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                    <Label Grid.Column="0" Text="âœ… ÐžÐ±Ð¾Ñ€Ð¾Ñ‚ ÑÐ²Ð¾Ð¸Ð¼ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°Ð¼:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                    <Label Grid.Column="1" Text="{Binding OwnClientsRevenue, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource Color.Success}"/>
                  </Grid>
                  
                  <!-- ÐŸÑ€Ð¾Ñ†ÐµÐ½Ñ‚ Ð¾Ñ‚ ÑÐ²Ð¾Ð¸Ñ… -->
                  <Grid Grid.Row="3" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                    <Label Grid.Column="0" Text="ðŸ“ˆ Ð”Ð¾Ð»Ñ ÑÐ²Ð¾Ð¸Ñ… ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                    <Label Grid.Column="1" Text="{Binding OwnClientsPercentage, StringFormat='{0:F1}%'}" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource Color.Primary}"/>
                  </Grid>
                  
                  <!-- ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð² -->
                  <Grid Grid.Row="4" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                    <Label Grid.Column="0" Text="ðŸ‘¤ ÐŸÑ€Ð¸Ð²ÐµÐ´ÐµÐ½Ð½Ñ‹Ñ… ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð¾Ð²:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                    <Label Grid.Column="1" Text="{Binding ClientsCount}" FontSize="14" FontAttributes="Bold"/>
                  </Grid>
                </Grid>
              </Border>
            </DataTemplate>
          </BindableLayout.ItemTemplate>
          </VerticalStackLayout>
        </VerticalStackLayout>
      </ScrollView>

      <!-- Products Tab Content -->
      <ScrollView x:Name="ProductsContent" IsVisible="False" Padding="16">
        <VerticalStackLayout Spacing="16">
          <Label Text="ðŸ“¦ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒÑŽ" FontSize="24" FontAttributes="Bold" Margin="0,0,0,16"/>
          
          <!-- Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð² -->
          <VerticalStackLayout BindableLayout.ItemsSource="{Binding ProductCosts}" Spacing="12">
            <BindableLayout.EmptyView>
              <VerticalStackLayout Padding="32" Spacing="12" HorizontalOptions="Center">
                <Label Text="ðŸ“¦" FontSize="48" HorizontalTextAlignment="Center"/>
                <Label Text="Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ‚Ð¾Ð²Ð°Ñ€Ð¾Ð²..." FontSize="16" TextColor="{DynamicResource Color.Text.Secondary}" HorizontalTextAlignment="Center"/>
              </VerticalStackLayout>
            </BindableLayout.EmptyView>
            
            <BindableLayout.ItemTemplate>
              <DataTemplate>
                <Border StrokeThickness="1" Stroke="{DynamicResource Color.Border}" BackgroundColor="{DynamicResource Color.Surface}" Padding="16" Margin="0,0,0,12" StrokeShape="RoundRectangle 12">
                  <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" RowSpacing="12">
                    <!-- SKU Ð¸ Ð½Ð°Ð·Ð²Ð°Ð½Ð¸Ðµ -->
                    <VerticalStackLayout Grid.Row="0" Spacing="4">
                      <Label Text="{Binding Sku}" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                      <Label Text="{Binding Name}" FontSize="18" FontAttributes="Bold"/>
                    </VerticalStackLayout>
                    
                    <!-- Ð¢ÐµÐºÑƒÑ‰Ð°Ñ ÑÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ -->
                    <Grid Grid.Row="1" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                      <Label Grid.Column="0" Text="ðŸ’¸ Ð¡ÐµÐ±ÐµÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚ÑŒ:" FontSize="14" VerticalTextAlignment="Center"/>
                      <Entry Grid.Column="1" Text="{Binding Cost}" Keyboard="Numeric" Placeholder="0" FontSize="14"/>
                      <Button Grid.Column="2" Text="ðŸ’¾" Clicked="OnSaveCostClicked" CommandParameter="{Binding}" Padding="12,8" BackgroundColor="{DynamicResource Color.Primary}"/>
                    </Grid>
                    
                    <!-- Ð¡Ñ€ÐµÐ´Ð½ÑÑ Ñ†ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸ -->
                    <Grid Grid.Row="2" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                      <Label Grid.Column="0" Text="ðŸ’° Ð¡Ñ€ÐµÐ´. Ñ†ÐµÐ½Ð° Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð¸:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                      <Label Grid.Column="1" Text="{Binding AveragePrice, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="14" FontAttributes="Bold"/>
                    </Grid>
                    
                    <!-- ÐœÐ°Ñ€Ð¶Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ -->
                    <Grid Grid.Row="3" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                      <Label Grid.Column="0" Text="ðŸ“ˆ ÐœÐ°Ñ€Ð¶Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                      <Label Grid.Column="1" Text="{Binding MarginPercent, StringFormat='{0:F1}%'}" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource Color.Success}"/>
                    </Grid>
                    
                    <!-- ÐŸÑ€Ð¸Ð±Ñ‹Ð»ÑŒ Ñ ÐµÐ´Ð¸Ð½Ð¸Ñ†Ñ‹ -->
                    <Grid Grid.Row="4" ColumnDefinitions="Auto,*" ColumnSpacing="8">
                      <Label Grid.Column="0" Text="âœ… ÐŸÑ€Ð¸Ð±Ñ‹Ð»ÑŒ/ÐµÐ´:" FontSize="14" TextColor="{DynamicResource Color.Text.Secondary}"/>
                      <Label Grid.Column="1" Text="{Binding ProfitPerUnit, StringFormat='{0:N0} ÑÑƒÐ¼'}" FontSize="14" FontAttributes="Bold" TextColor="{DynamicResource Color.Primary}"/>
                    </Grid>
                  </Grid>
                </Border>
              </DataTemplate>
            </BindableLayout.ItemTemplate>
          </VerticalStackLayout>
        </VerticalStackLayout>
      </ScrollView>
    </Grid>
  </Grid>
</ContentPage>
