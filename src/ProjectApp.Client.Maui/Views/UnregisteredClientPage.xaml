<?xml version="1.0" encoding="utf-8"?>
<TabbedPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
            xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
            x:Class="ProjectApp.Client.Maui.Views.UnregisteredClientPage"
            Title="Незаписанные">
  <TabbedPage.ToolbarItems>
    <ToolbarItem Text="Обновить" Command="{Binding RefreshAllCommand}"/>
  </TabbedPage.ToolbarItems>

  <ContentPage Title="Продажи">
    <ScrollView>
      <VerticalStackLayout Padding="16" Spacing="10">
        <HorizontalStackLayout Spacing="8">
          <Label Text="От:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateFrom}"/>
          <Label Text="До:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateTo}"/>
          <Button Text="Обновить" Command="{Binding RefreshSalesCommand}"/>
        </HorizontalStackLayout>
        <CollectionView ItemsSource="{Binding Sales}">
          <CollectionView.ItemTemplate>
            <DataTemplate>
              <Frame Padding="10" HasShadow="False" CornerRadius="10">
                <VerticalStackLayout Spacing="6">
                  <Label Text="{Binding Id, StringFormat='Продажа #{0}'}" FontAttributes="Bold"/>
                  <Label Text="{Binding CreatedAt, StringFormat='{0:yyyy-MM-dd HH:mm}'}" FontSize="12" TextColor="Gray"/>
                  <Label Text="{Binding PaymentType, StringFormat='Оплата: {0}'}"/>
                  <Label Text="{Binding Total, StringFormat='Сумма: {0:C}'}"/>
                </VerticalStackLayout>
              </Frame>
            </DataTemplate>
          </CollectionView.ItemTemplate>
        </CollectionView>
      </VerticalStackLayout>
    </ScrollView>
  </ContentPage>

  <ContentPage Title="Возвраты">
    <ScrollView>
      <VerticalStackLayout Padding="16" Spacing="10">
        <HorizontalStackLayout Spacing="8">
          <Label Text="От:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateFrom}"/>
          <Label Text="До:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateTo}"/>
          <Button Text="Обновить" Command="{Binding RefreshReturnsCommand}"/>
        </HorizontalStackLayout>
        <CollectionView ItemsSource="{Binding Returns}">
          <CollectionView.ItemTemplate>
            <DataTemplate>
              <Frame Padding="10" HasShadow="False" CornerRadius="10">
                <VerticalStackLayout Spacing="6">
                  <Label Text="{Binding Id, StringFormat='Возврат #{0}'}" FontAttributes="Bold"/>
                  <Label Text="{Binding CreatedAt, StringFormat='{0:yyyy-MM-dd HH:mm}'}" FontSize="12" TextColor="Gray"/>
                  <Label Text="{Binding Sum, StringFormat='Сумма: {0:C}'}"/>
                  <Label Text="{Binding Reason, StringFormat='Причина: {0}'}"/>
                </VerticalStackLayout>
              </Frame>
            </DataTemplate>
          </CollectionView.ItemTemplate>
        </CollectionView>
      </VerticalStackLayout>
    </ScrollView>
  </ContentPage>
</TabbedPage>
