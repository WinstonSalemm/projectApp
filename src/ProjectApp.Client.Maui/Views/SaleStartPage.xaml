<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:ProjectApp.Client.Maui.ViewModels"
             x:Class="ProjectApp.Client.Maui.Views.SaleStartPage"
             x:Name="Root"
             Title="Sales" x:DataType="viewModels:SaleStartViewModel">
  <ContentPage.Resources>
    <ResourceDictionary>
      <GridItemsLayout x:Key="CategoryLayout.Compact"
                       Orientation="Vertical"
                       Span="2"
                       HorizontalItemSpacing="{StaticResource Space.3}"
                       VerticalItemSpacing="{StaticResource Space.3}" />
      <GridItemsLayout x:Key="CategoryLayout.Medium"
                       Orientation="Vertical"
                       Span="3"
                       HorizontalItemSpacing="{StaticResource Space.4}"
                       VerticalItemSpacing="{StaticResource Space.4}" />
      <GridItemsLayout x:Key="CategoryLayout.Expanded"
                       Orientation="Vertical"
                       Span="4"
                       HorizontalItemSpacing="{StaticResource Space.4}"
                       VerticalItemSpacing="{StaticResource Space.4}" />
    </ResourceDictionary>
  </ContentPage.Resources>

  <VisualStateManager.VisualStateGroups>
    <VisualStateGroup x:Name="AdaptiveStates">
      <VisualState Name="Compact">
        <VisualState.Setters>
          <Setter TargetName="CategoriesCollection" Property="CollectionView.ItemsLayout" Value="{StaticResource CategoryLayout.Compact}" />
        </VisualState.Setters>
      </VisualState>
      <VisualState Name="Medium">
        <VisualState.Setters>
          <Setter TargetName="CategoriesCollection" Property="CollectionView.ItemsLayout" Value="{StaticResource CategoryLayout.Medium}" />
        </VisualState.Setters>
      </VisualState>
      <VisualState Name="Expanded">
        <VisualState.Setters>
          <Setter TargetName="CategoriesCollection" Property="CollectionView.ItemsLayout" Value="{StaticResource CategoryLayout.Expanded}" />
        </VisualState.Setters>
      </VisualState>
    </VisualStateGroup>
  </VisualStateManager.VisualStateGroups>

  <ScrollView>
    <VerticalStackLayout Spacing="{StaticResource Space.4}">
      <Border Style="{StaticResource Card.Container}">
        <VerticalStackLayout Spacing="{StaticResource Space.2}">
          <Label Text="Choose product category"
                 FontSize="{StaticResource Font.Size.H2}"
                 FontAttributes="Bold" />
          <Label Text="Pick a preset to speed up checkout. Categories are tailored to your sales flow."
                 TextColor="{DynamicResource Color.Text.Secondary}" />
        </VerticalStackLayout>
      </Border>

      <CollectionView x:Name="CategoriesCollection"
                      ItemsSource="{Binding Categories}"
                      SelectionMode="None">
        <CollectionView.ItemTemplate>
          <DataTemplate>
            <Border Style="{StaticResource Card.Container}">
              <Button Text="{Binding .}"
                      Style="{StaticResource Button.Primary}"
                      HeightRequest="64"
                      Clicked="OnCategoryClicked"
                      SemanticProperties.Description="Open quick sale for selected category" />
            </Border>
          </DataTemplate>
        </CollectionView.ItemTemplate>
      </CollectionView>
    </VerticalStackLayout>
  </ScrollView>
</ContentPage>

