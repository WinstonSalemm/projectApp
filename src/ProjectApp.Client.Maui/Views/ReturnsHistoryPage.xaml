<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewModels="clr-namespace:ProjectApp.Client.Maui.ViewModels"
             x:Class="ProjectApp.Client.Maui.Views.ReturnsHistoryPage"
             Title="Р’РѕР·РІСЂР°С‚С‹">
  <Grid Padding="24" RowDefinitions="Auto,*" RowSpacing="16">
    <Frame Grid.Row="0" Style="{StaticResource CardFrame}">
      <Grid ColumnDefinitions="*,*,Auto" ColumnSpacing="12">
        <HorizontalStackLayout Grid.Column="0" Spacing="8">
          <Label Text="РћС‚:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateFrom}"/>
        </HorizontalStackLayout>
        <HorizontalStackLayout Grid.Column="1" Spacing="8">
          <Label Text="Р”Рѕ:" VerticalTextAlignment="Center"/>
          <DatePicker Date="{Binding DateTo}"/>
        </HorizontalStackLayout>
        <Button Grid.Column="2" Text="РћР±РЅРѕРІРёС‚СЊ" Command="{Binding LoadCommand}" ImageSource="{StaticResource IconRefresh}" ContentLayout="Left,8" Style="{StaticResource OutlinedButton}"/>
      </Grid>
    </Frame>

    <CollectionView Grid.Row="1" ItemsSource="{Binding Items}">
      <CollectionView.ItemTemplate>
        <DataTemplate>
          <Frame Style="{StaticResource CardFrame}">
            <VerticalStackLayout Spacing="6">
              <Label Text="{Binding Id, StringFormat='Р’РѕР·РІСЂР°С‚ #{0}'}" FontAttributes="Bold"/>
              <Label Text="{Binding CreatedAt, Converter={StaticResource DateTimeToRuConverter}}" FontSize="12" TextColor="Gray"/>
              <Label Text="{Binding RefSaleId, StringFormat='РџСЂРѕРґР°Р¶Р°: #{0}'}"/>
              <Label Text="{Binding Sum, Converter={StaticResource CurrencyConverter}, StringFormat='РЎСѓРјРјР°: {0}'}"/>
              <Label Text="{Binding Reason}" FontSize="12"/>
            </VerticalStackLayout>
          </Frame>
        </DataTemplate>
      </CollectionView.ItemTemplate>
      <CollectionView.EmptyView>
        <VerticalStackLayout Padding="12" Spacing="6">
          <Label Text="РќРµС‚ РІРѕР·РІСЂР°С‚РѕРІ" FontAttributes="Bold" TextColor="{StaticResource MutedTextColor}"/>
          <Label Text="Р’С‹Р±РµСЂРёС‚Рµ РґР°С‚С‹ Рё РЅР°Р¶РјРёС‚Рµ РѕР±РЅРѕРІРёС‚СЊ" FontSize="12" TextColor="{StaticResource MutedTextColor}"/>
        </VerticalStackLayout>
      </CollectionView.EmptyView>
    </CollectionView>
  </Grid>
</ContentPage>


