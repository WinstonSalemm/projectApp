<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProjectApp.Client.Maui.Views.SuppliesHistoryPage"
             Title="Поставки">
  <ScrollView>
    <VerticalStackLayout Padding="16" Spacing="12">
      <HorizontalStackLayout Spacing="8">
        <Label Text="Код партии:" VerticalTextAlignment="Center"/>
        <Entry Text="{Binding CodeFilter}" Placeholder="например, 2025-10"/>
        <Button Text="Обновить" Command="{Binding LoadCommand}"/>
      </HorizontalStackLayout>

      <CollectionView ItemsSource="{Binding Items}">
        <CollectionView.ItemTemplate>
          <DataTemplate>
            <Frame Padding="10" HasShadow="False" CornerRadius="10">
              <VerticalStackLayout Spacing="6">
                <Label Text="{Binding Code, StringFormat='Код: {0}'}" FontAttributes="Bold"/>
                <Label Text="{Binding CreatedAt, StringFormat='{0:yyyy-MM-dd HH:mm}'}" FontSize="12" TextColor="Gray"/>
                <Label Text="{Binding ProductId, StringFormat='Товар: #{0}'}"/>
                <Label Text="{Binding Register, StringFormat='Регистр: {0}'}" FontSize="12"/>
                <Label Text="{Binding Qty, StringFormat='Кол-во: {0}'}"/>
                <Label Text="{Binding UnitCost, StringFormat='Себестоимость: {0:C}'}"/>
              </VerticalStackLayout>
            </Frame>
          </DataTemplate>
        </CollectionView.ItemTemplate>
      </CollectionView>
    </VerticalStackLayout>
  </ScrollView>
</ContentPage>
