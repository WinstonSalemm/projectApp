<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ProjectApp.Client.Maui.Views.ContractsHistoryPage"
             Title="Договоры">
  <ScrollView>
    <VerticalStackLayout Padding="16" Spacing="12">
      <HorizontalStackLayout Spacing="8">
        <Label Text="Статус:" VerticalTextAlignment="Center"/>
        <Entry Text="{Binding StatusFilter}" Placeholder="Signed/Paid/Closed"/>
        <Button Text="Обновить" Command="{Binding LoadCommand}"/>
      </HorizontalStackLayout>

      <CollectionView ItemsSource="{Binding Items}">
        <CollectionView.ItemTemplate>
          <DataTemplate>
            <Frame Padding="10" HasShadow="False" CornerRadius="10">
              <VerticalStackLayout Spacing="6">
                <Label Text="{Binding Id, StringFormat='Договор #{0}'}" FontAttributes="Bold"/>
                <Label Text="{Binding CreatedAt, StringFormat='{0:yyyy-MM-dd HH:mm}'}" FontSize="12" TextColor="Gray"/>
                <Label Text="{Binding OrgName}"/>
                <Label Text="{Binding Status, StringFormat='Статус: {0}'}" FontSize="12"/>
                <Label Text="{Binding Note}" FontSize="12"/>
              </VerticalStackLayout>
            </Frame>
          </DataTemplate>
        </CollectionView.ItemTemplate>
      </CollectionView>
    </VerticalStackLayout>
  </ScrollView>
</ContentPage>
